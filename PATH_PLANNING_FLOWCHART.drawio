<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36 Edg/143.0.0.0" version="29.2.7" pages="2">
  <diagram name="System Architecture" id="system-arch">
    <mxGraphModel dx="1418" dy="754" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="mission-manager" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;verticalAlign=top;fontSize=16;fontStyle=1;align=left;" value="MISSION MANAGER (Orchestrator)" vertex="1">
          <mxGeometry height="80" width="970" x="90" y="25" as="geometry" />
        </mxCell>
        <mxCell id="state-management" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;fontStyle=1" value="State Management&lt;br&gt;(IDLE→ARM→TAKEOFF→EXECUTE→LAND)" vertex="1">
          <mxGeometry height="50" width="300" x="710" y="50" as="geometry" />
        </mxCell>
        <mxCell id="base-station" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;verticalAlign=top;fontSize=16;fontStyle=1;align=center;" value="GLOBAL BASE STATION - 4 Module Pipeline (Ground)" vertex="1">
          <mxGeometry height="230" width="1100" x="50" y="120" as="geometry" />
        </mxCell>
        <mxCell id="mapping-module" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1" value="Mapping Module&lt;br&gt;(POI Detection)" vertex="1">
          <mxGeometry height="80" width="200" x="100" y="200" as="geometry" />
        </mxCell>
        <mxCell id="task-allocation" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1" value="Task Allocation&lt;br&gt;(Drone Assignment)" vertex="1">
          <mxGeometry height="80" width="200" x="380" y="200" as="geometry" />
        </mxCell>
        <mxCell id="path-planner" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1" value="Path Planner&lt;br&gt;(A→B Routing)" vertex="1">
          <mxGeometry height="80" width="200" x="660" y="200" as="geometry" />
        </mxCell>
        <mxCell id="commander" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1" value="Commander&lt;br&gt;(Executor)" vertex="1">
          <mxGeometry height="80" width="200" x="940" y="200" as="geometry" />
        </mxCell>
        <mxCell id="arrow1" edge="1" parent="1" source="mapping-module" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#000000;endArrow=classic;endFill=1;" target="task-allocation" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow2" edge="1" parent="1" source="task-allocation" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#000000;endArrow=classic;endFill=1;" target="path-planner" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" edge="1" parent="1" source="path-planner" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#000000;endArrow=classic;endFill=1;" target="commander" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-manager-1" edge="1" parent="1" source="mission-manager" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666;endArrow=classic;endFill=1;dashed=1;" target="mapping-module" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="590" y="153" />
              <mxPoint x="200" y="153" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-manager-2" edge="1" parent="1" source="mission-manager" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666;endArrow=classic;endFill=1;dashed=1;" target="task-allocation" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="590" y="153" />
              <mxPoint x="480" y="153" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-manager-3" edge="1" parent="1" source="mission-manager" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666;endArrow=classic;endFill=1;dashed=1;" target="path-planner" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="590" y="153" />
              <mxPoint x="760" y="153" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-manager-4" edge="1" parent="1" source="mission-manager" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666;endArrow=classic;endFill=1;dashed=1;" target="commander" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="590" y="153" />
              <mxPoint x="1040" y="153" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ros2-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;align=left;verticalAlign=top;" value="ROS2 Topics &amp; Services&lt;br&gt;• /points_of_interest (POIArray) - Mapping output&lt;br&gt;• /obstacle_map (OccupancyGrid) - Mapping output&lt;br&gt;• /task_assignments (TaskArray) - Task Allocation output&lt;br&gt;• /path_plan (Path) - Path Planner output&lt;br&gt;• /drone_position (Point) - Telemetry&lt;br&gt;• /mission_state (String) - Mission Manager state" vertex="1">
          <mxGeometry height="110" width="1040" x="100" y="380" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-ros2-1" edge="1" parent="1" source="mapping-module" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#666;endArrow=classic;endFill=1;dashed=1;" target="ros2-box" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-ros2-2" edge="1" parent="1" source="task-allocation" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#666;endArrow=classic;endFill=1;dashed=1;" target="ros2-box" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-ros2-3" edge="1" parent="1" source="path-planner" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#666;endArrow=classic;endFill=1;dashed=1;" target="ros2-box" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-ros2-4" edge="1" parent="1" source="commander" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#666;endArrow=classic;endFill=1;dashed=1;" target="ros2-box" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="digi-rc-layer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#FF6600;fontSize=14;fontStyle=1;align=center;verticalAlign=middle;" value="digi_rc (Communication Interface)&lt;br&gt;MAVSDK / MAVLink Protocol" vertex="1">
          <mxGeometry height="60" width="1040" x="100" y="510" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-digi-rc" edge="1" parent="1" source="ros2-box" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#0066CC;endArrow=classic;endFill=1;" target="digi-rc-layer" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-px4" edge="1" parent="1" source="digi-rc-layer" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#FF6600;endArrow=classic;endFill=1;" target="px4-container" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="px4-container" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;verticalAlign=top;fontSize=16;fontStyle=1;align=center;" value="PX4 Autopilot / Gazebo (Drones)" vertex="1">
          <mxGeometry height="280" width="1100" x="70" y="630" as="geometry" />
        </mxCell>
        <mxCell id="drone1" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=12;fontStyle=1" value="Drone 1&lt;br&gt;(Simulated)" vertex="1">
          <mxGeometry height="80" width="120" x="180" y="657" as="geometry" />
        </mxCell>
        <mxCell id="drone2" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=12;fontStyle=1" value="Drone 2&lt;br&gt;(Simulated)" vertex="1">
          <mxGeometry height="80" width="120" x="449" y="657" as="geometry" />
        </mxCell>
        <mxCell id="droneN" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=12;fontStyle=1" value="Drone N&lt;br&gt;(Simulated)" vertex="1">
          <mxGeometry height="80" width="120" x="730" y="657" as="geometry" />
        </mxCell>
        <mxCell id="gazebo-viz" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontSize=11;align=left;verticalAlign=top;" value="Gazebo 3D Visualization &amp; Physics Engine&lt;br&gt;• Environment rendering&lt;br&gt;• Obstacle detection &amp; collision&lt;br&gt;• Path visualization (markers/lines)" vertex="1">
          <mxGeometry height="80" width="700" x="180" y="770" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="Detailed Flowchart" id="detailed-flow">
    <mxGraphModel dx="864" dy="442" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="3000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="start" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;fontSize=14;fontStyle=1" value="START SYSTEM" vertex="1">
          <mxGeometry height="60" width="200" x="500" y="40" as="geometry" />
        </mxCell>
        <mxCell id="launch-gazebo" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;" value="Launch Gazebo&lt;br&gt;• World file&lt;br&gt;• Drone models&lt;br&gt;• Obstacles" vertex="1">
          <mxGeometry height="80" width="180" x="300" y="140" as="geometry" />
        </mxCell>
        <mxCell id="launch-ros2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;" value="Launch ROS2 Nodes&lt;br&gt;• digi_rc package&lt;br&gt;• MAVSDK server" vertex="1">
          <mxGeometry height="80" width="180" x="720" y="140" as="geometry" />
        </mxCell>
        <mxCell id="arrow-start-1" edge="1" parent="1" source="start" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="launch-gazebo" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-start-2" edge="1" parent="1" source="start" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="launch-ros2" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="init-components" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left;" value="Initialize Components&lt;br&gt;1. MAVSDK Connection&lt;br&gt;2. ROS2 Publishers&lt;br&gt;3. Service Servers&lt;br&gt;4. Telemetry Streams" vertex="1">
          <mxGeometry height="90" width="300" x="450" y="260" as="geometry" />
        </mxCell>
        <mxCell id="arrow-init-1" edge="1" parent="1" source="launch-gazebo" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="init-components" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-init-2" edge="1" parent="1" source="launch-ros2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="init-components" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="define-mission" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;align=left;" value="USER: Define Mission&lt;br&gt;• Mission area of interest&lt;br&gt;• Points of interest (POIs)&lt;br&gt;• Altitude constraints&lt;br&gt;• No-fly zones&lt;br&gt;• Mission parameters" vertex="1">
          <mxGeometry height="100" width="300" x="450" y="390" as="geometry" />
        </mxCell>
        <mxCell id="arrow-define" edge="1" parent="1" source="init-components" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="define-mission" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mission-manager-breakdown" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd966;strokeColor=#d6b656;fontSize=11;align=left;verticalAlign=top;fontStyle=1" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;MISSION MANAGER (Orchestrator)&lt;br&gt;Break Down Mission into Tasks&lt;br&gt;&lt;br&gt;• Parse mission requirements&lt;br&gt;• Initialize state machine&lt;br&gt;• Coordinate module pipeline&lt;br&gt;• Monitor mission state" vertex="1">
          <mxGeometry height="120" width="300" x="450" y="530" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-manager" edge="1" parent="1" source="define-mission" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="mission-manager-breakdown" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mapping-module-detail" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;align=left;verticalAlign=top;fontStyle=1" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Mapping Module (POI Detection)&lt;br&gt;&lt;br&gt;• Scan environment (Gazebo sensors)&lt;br&gt;• Detect obstacles &amp;amp; terrain&lt;br&gt;• Identify points of interest&lt;br&gt;• Build occupancy grid map&lt;br&gt;• Publish: /points_of_interest&lt;br&gt;• Publish: /obstacle_map" vertex="1">
          <mxGeometry height="140" width="300" x="450" y="690" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-mapping" edge="1" parent="1" source="mission-manager-breakdown" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="mapping-module-detail" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="task-allocation-detail" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;align=left;verticalAlign=top;fontStyle=1" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Task Allocation Module&lt;br&gt;(Drone Assignment)&lt;br&gt;&lt;br&gt;• Subscribe: /points_of_interest&lt;br&gt;• Assign drones to POIs&lt;br&gt;• Optimize task distribution&lt;br&gt;• Balance workload&lt;br&gt;• Publish: /task_assignments" vertex="1">
          <mxGeometry height="140" width="300" x="450" y="870" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-task-alloc" edge="1" parent="1" source="mapping-module-detail" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="task-allocation-detail" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="path-planning" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;align=left;verticalAlign=top;fontStyle=1" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Path Planner Module&lt;br&gt;(A→B Routing)&lt;br&gt;&lt;br&gt;• Subscribe: /task_assignments&lt;br&gt;• Subscribe: /obstacle_map&lt;br&gt;• Select algorithm (A*, RRT*, Dijkstra)&lt;br&gt;• Generate optimal collision-free paths&lt;br&gt;• Smooth trajectories (B-spline/Bezier)&lt;br&gt;• Publish: /path_plan" vertex="1">
          <mxGeometry height="160" width="300" x="450" y="1050" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-path-plan" edge="1" parent="1" source="task-allocation-detail" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="path-planning" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="publish-path" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;align=left;" value="Publish to ROS2 Topics&lt;br&gt;• /path_plan (Path data)&lt;br&gt;• /path_viz (Visualization)&lt;br&gt;• /mission_state (State)" vertex="1">
          <mxGeometry height="80" width="300" x="450" y="1250" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-publish" edge="1" parent="1" source="path-planning" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="publish-path" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="safety-handler" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#cc0000;fontSize=11;align=left;verticalAlign=top;fontStyle=1" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;SAFETY &amp;amp; INTERRUPT HANDLER&lt;br&gt;(Parallel Monitoring - Can Intervene Anytime)&lt;br&gt;&lt;br&gt;• Flight envelope validation&lt;br&gt;• Altitude/distance limits check&lt;br&gt;• Emergency obstacle detection&lt;br&gt;• Battery monitoring&lt;br&gt;• Communication loss detection&lt;br&gt;• Geofence violations&lt;br&gt;• Abort mission trigger&lt;br&gt;• Emergency landing protocol" vertex="1">
          <mxGeometry height="180" width="320" x="850" y="690" as="geometry" />
        </mxCell>
        <mxCell id="arrow-safety-1" edge="1" parent="1" source="safety-handler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;strokeColor=#cc0000;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" target="mapping-module-detail" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-safety-2" edge="1" parent="1" source="safety-handler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;strokeColor=#cc0000;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" target="task-allocation-detail" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-safety-3" edge="1" parent="1" source="safety-handler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;strokeColor=#cc0000;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" target="path-planning" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-safety-4" edge="1" parent="1" source="safety-handler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;strokeColor=#cc0000;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" target="publish-path" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="viz-gazebo" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;fontSize=11;align=left;" value="Visualize Path in Gazebo&lt;br&gt;• Draw path line (RVIZ/Gazebo)&lt;br&gt;• Display waypoint markers&lt;br&gt;• Highlight obstacles&lt;br&gt;• Show safety zones" vertex="1">
          <mxGeometry height="100" width="300" x="450" y="1370" as="geometry" />
        </mxCell>
        <mxCell id="arrow-viz" edge="1" parent="1" source="publish-path" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="viz-gazebo" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-safety-viz" edge="1" parent="1" source="safety-handler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;strokeColor=#cc0000;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" target="viz-gazebo" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="commander-module" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;align=left;verticalAlign=top;fontStyle=1" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;Commander Module (Executor)&lt;br&gt;&lt;br&gt;• Subscribe: /path_plan&lt;br&gt;• Initialize MAVSDK connection&lt;br&gt;• Activate mission execution" vertex="1">
          <mxGeometry height="110" width="300" x="450" y="1510" as="geometry" />
        </mxCell>
        <mxCell id="arrow-to-commander" edge="1" parent="1" source="viz-gazebo" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="commander-module" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mission-exec" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1" value="MISSION EXECUTION STARTS&lt;br&gt;Execute Waypoints via digi_rc" vertex="1">
          <mxGeometry height="60" width="300" x="450" y="1660" as="geometry" />
        </mxCell>
        <mxCell id="arrow-exec" edge="1" parent="1" source="commander-module" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="mission-exec" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-safety-exec" edge="1" parent="1" source="safety-handler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;strokeColor=#cc0000;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" target="mission-exec" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmd-arm" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=11;align=left;" value="Send Command: ARM&lt;br&gt;• Via digi_rc + MAVSDK&lt;br&gt;• Start offboard mode" vertex="1">
          <mxGeometry height="70" width="300" x="450" y="1760" as="geometry" />
        </mxCell>
        <mxCell id="arrow-arm" edge="1" parent="1" source="mission-exec" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="cmd-arm" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmd-takeoff" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=11;align=left;" value="Send Command: TAKEOFF&lt;br&gt;• Rise to initial altitude&lt;br&gt;• Stabilize position" vertex="1">
          <mxGeometry height="70" width="300" x="450" y="1870" as="geometry" />
        </mxCell>
        <mxCell id="arrow-takeoff" edge="1" parent="1" source="cmd-arm" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="cmd-takeoff" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="path-exec-loop" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1" value="Path Execution Loop&lt;br&gt;FOR each waypoint in path:" vertex="1">
          <mxGeometry height="60" width="300" x="450" y="1980" as="geometry" />
        </mxCell>
        <mxCell id="arrow-path-loop" edge="1" parent="1" source="cmd-takeoff" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="path-exec-loop" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-safety-loop" edge="1" parent="1" source="safety-handler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;strokeColor=#cc0000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" target="path-exec-loop" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmd-goto" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=11;align=left;" value="Send Command: GOTO(x, y, z)&lt;br&gt;• Via digi_rc + MAVSDK&lt;br&gt;• Monitor telemetry" vertex="1">
          <mxGeometry height="70" width="300" x="450" y="2080" as="geometry" />
        </mxCell>
        <mxCell id="arrow-goto" edge="1" parent="1" source="path-exec-loop" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="cmd-goto" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="monitoring" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;align=left;" value="Real-time Monitoring&lt;br&gt;• Position tracking&lt;br&gt;• Obstacle detection&lt;br&gt;• Path deviation check" vertex="1">
          <mxGeometry height="80" width="300" x="450" y="2190" as="geometry" />
        </mxCell>
        <mxCell id="arrow-monitor" edge="1" parent="1" source="cmd-goto" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="monitoring" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-safety-monitor" edge="1" parent="1" source="safety-handler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;strokeColor=#cc0000;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" target="monitoring" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="deviation" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1" value="Deviation?" vertex="1">
          <mxGeometry height="80" width="200" x="500" y="2310" as="geometry" />
        </mxCell>
        <mxCell id="arrow-deviation-check" edge="1" parent="1" source="monitoring" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="deviation" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dynamic-replan" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;align=left;" value="Dynamic Re-planning&lt;br&gt;• Adjust path&lt;br&gt;• Avoid new obstacles" vertex="1">
          <mxGeometry height="80" width="180" x="850" y="2310" as="geometry" />
        </mxCell>
        <mxCell id="arrow-dynamic" edge="1" parent="1" source="deviation" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;fontColor=#FF0000;fontSize=12;fontStyle=1" target="dynamic-replan" value="Yes">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-dynamic-loop" edge="1" parent="1" source="dynamic-replan" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;" target="monitoring" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="940" y="2230" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wait-position" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left;" value="Wait for Position&lt;br&gt;• Check tolerance&lt;br&gt;• Confirm arrival" vertex="1">
          <mxGeometry height="70" width="300" x="450" y="2430" as="geometry" />
        </mxCell>
        <mxCell id="arrow-wait" edge="1" parent="1" source="deviation" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;fontColor=#00FF00;fontSize=12;fontStyle=1" target="wait-position" value="No">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="all-waypoints" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1" value="All Waypoints&lt;br&gt;Reached?" vertex="1">
          <mxGeometry height="80" width="200" x="500" y="2540" as="geometry" />
        </mxCell>
        <mxCell id="arrow-waypoints-check" edge="1" parent="1" source="wait-position" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="all-waypoints" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-next-waypoint" edge="1" parent="1" source="all-waypoints" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;fontColor=#FF0000;fontSize=12;fontStyle=1" target="path-exec-loop" value="No">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="200" y="2580" />
              <mxPoint x="200" y="2010" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cmd-land" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontSize=11;align=left;" value="Send Command: LAND&lt;br&gt;• Via digi_rc + MAVSDK&lt;br&gt;• Descend safely&lt;br&gt;• Disarm after landing" vertex="1">
          <mxGeometry height="80" width="300" x="450" y="2660" as="geometry" />
        </mxCell>
        <mxCell id="arrow-land" edge="1" parent="1" source="all-waypoints" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;fontColor=#00FF00;fontSize=12;fontStyle=1" target="cmd-land" value="Yes">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-safety-land" edge="1" parent="1" source="safety-handler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;dashed=1;strokeColor=#cc0000;" target="cmd-land" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1040" y="2700" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="mission-complete" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;align=left;" value="Mission Complete&lt;br&gt;• Save logs&lt;br&gt;• Generate report&lt;br&gt;• Update Mission Manager" vertex="1">
          <mxGeometry height="80" width="300" x="450" y="2780" as="geometry" />
        </mxCell>
        <mxCell id="arrow-complete" edge="1" parent="1" source="cmd-land" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="mission-complete" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="end" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#a20025;strokeColor=#6F0000;fontColor=#ffffff;fontSize=14;fontStyle=1" value="END" vertex="1">
          <mxGeometry height="60" width="200" x="500" y="2900" as="geometry" />
        </mxCell>
        <mxCell id="arrow-end" edge="1" parent="1" source="mission-complete" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" target="end" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
